<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام الدردشة والمواعيد | شركة توافق للتوظيف</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>💬</text></svg>">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.cdnfonts.com/css/neo-sans-arabic" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
    :root {
        /* الألوان الموحدة مع منصة توافق */
        --primary-green: #003c6d;
        --primary-light: #005085;
        --primary-lighter: #e8eff5;
        --primary-lightest: #f4f9fa;
        --primary-dark: #003655;
        --primary-darker: #003858;
        --primary-darkest: #00182b;

        /* تدرجات رمادية */
        --grey-900: #1a1a1a;
        --grey-800: #2c2c2c;
        --grey-700: #424242;
        --grey-500: #757575;
        --grey-300: #e0e0e0;
        --grey-100: #f5f5f5;
        --grey-50: #fafafa;
        --pure-white: #FFFFFF;

        /* ألوان إضافية للدردشة */
        --message-sent: #003c6d;
        --message-received: #f0f2f5;
        --online-status: #4caf50;
        --away-status: #ff9800;
        --offline-status: #9e9e9e;

        /* التدرجات */
        --gradient-primary: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-light) 100%);
        --gradient-light: linear-gradient(135deg, var(--primary-light) 0%, #0067a3 100%);
        --gradient-dark: linear-gradient(135deg, var(--primary-darker) 0%, var(--primary-dark) 100%);
        
        /* الظلال */
        --shadow-sm: 0 2px 8px rgba(0, 69, 109, 0.08);
        --shadow-md: 0 6px 20px rgba(0, 60, 109, 0.12);
        --shadow-lg: 0 12px 40px rgba(0, 65, 109, 0.15);
        --shadow-xl: 0 25px 65px rgba(0, 74, 109, 0.18);

        /* الخطوط */
        --font-main: 'Neo Sans Arabic', sans-serif;

        /* المتغيرات التقنية */
        --sidebar-width: 340px;
        --header-height: 90px;
        --border-radius-sm: 12px;
        --border-radius-md: 20px;
        --border-radius-lg: 28px;
        
        /* الانتقالات */
        --transition-fast: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        --transition-medium: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
        --transition-slow: all 0.7s cubic-bezier(0.16, 1, 0.3, 1);
    }

    /* ===== التهيئات الأساسية ===== */
    *, *::before, *::after { 
        margin: 0; 
        padding: 0; 
        box-sizing: border-box; 
    }

    html { 
        scroll-behavior: smooth; 
        font-size: 16px;
    }

    body { 
        font-family: var(--font-main); 
        background: var(--grey-50); 
        color: var(--grey-700); 
        line-height: 1.6; 
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    ::selection { 
        background: var(--primary-green); 
        color: var(--pure-white); 
    }

    ::-webkit-scrollbar { 
        width: 6px; 
        background: var(--grey-100); 
    }

    ::-webkit-scrollbar-thumb { 
        background: var(--gradient-primary); 
        border-radius: 6px;
    }

    /* ===== التخطيط الرئيسي ===== */
    .dashboard-layout {
        display: flex;
        min-height: 100vh;
        background: var(--grey-50);
    }

    /* ===== الشريط الجانبي ===== */
    .sidebar {
        width: var(--sidebar-width);
        background: var(--pure-white);
        color: var(--primary-green);
        position: fixed;
        top: 0;
        right: 0;
        height: 100vh;
        overflow-y: auto;
        transition: var(--transition-medium);
        z-index: 1000;
        box-shadow: var(--shadow-lg);
        border-left: 1px solid var(--grey-100);
    }

    .sidebar-header {
        padding: 2.5rem 2rem;
        border-bottom: 2px solid var(--grey-100);
        text-align: center;
        background: var(--primary-lightest);
    }

    .sidebar-logo {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
    }

    .sidebar-logo-icon {
        width: 65px;
        height: 65px;
        background: var(--gradient-primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        color: var(--pure-white);
        box-shadow: var(--shadow-md);
    }

    .sidebar-logo-text {
        text-align: center;
    }

    .sidebar-logo-main {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-darker);
        margin-bottom: 0.3rem;
    }

    .sidebar-logo-sub {
        font-size: 0.9rem;
        color: var(--primary-green);
        font-weight: 600;
    }

    .entity-badge {
        background: var(--gradient-primary);
        color: var(--pure-white);
        padding: 0.8rem 1.5rem;
        border-radius: 25px;
        font-size: 0.85rem;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        box-shadow: var(--shadow-sm);
    }

    /* قائمة التنقل */
    .sidebar-nav {
        padding: 1.5rem 0;
    }

    .nav-section {
        margin-bottom: 2rem;
    }

    .nav-section-title {
        padding: 0 2rem 1rem;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        opacity: 0.8;
        font-weight: 700;
        color: var(--primary-green);
        border-bottom: 1px solid var(--grey-100);
        margin-bottom: 1rem;
    }

    .nav-item {
        list-style: none;
        margin-bottom: 0.3rem;
    }

    .nav-link {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem 2rem;
        color: var(--primary-green);
        text-decoration: none;
        transition: var(--transition-fast);
        border-right: 4px solid transparent;
        position: relative;
        font-weight: 500;
        background: transparent;
    }

    .nav-link.active {
        background: var(--gradient-primary);
        color: var(--pure-white);
        border-right-color: var(--primary-darker);
        transform: translateX(-5px);
        box-shadow: var(--shadow-sm);
    }

    .nav-link:hover:not(.active) {
        background: var(--primary-lightest);
        color: var(--primary-dark);
        border-right-color: var(--primary-light);
        transform: translateX(-3px);
    }

    .nav-link i {
        font-size: 1.2rem;
        width: 24px;
        text-align: center;
        opacity: 0.9;
    }

    .nav-badge {
        background: var(--primary-light);
        color: var(--pure-white);
        font-size: 0.7rem;
        padding: 0.3rem 0.6rem;
        border-radius: 12px;
        margin-right: auto;
        font-weight: 700;
        min-width: 20px;
        text-align: center;
    }

    /* ===== المحتوى الرئيسي ===== */
    .main-content {
        margin-right: var(--sidebar-width);
        flex: 1;
        min-height: 100vh;
    }

    /* رأس الصفحة */
    .dashboard-header {
        background: var(--pure-white);
        height: var(--header-height);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 2.5rem;
        box-shadow: var(--shadow-sm);
        position: sticky;
        top: 0;
        z-index: 500;
        border-bottom: 1px solid var(--grey-100);
    }

    .header-left {
        display: flex;
        align-items: center;
        gap: 2rem;
    }

    .page-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--primary-darker);
        margin-bottom: 0.3rem;
    }

    .breadcrumb {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.85rem;
        color: var(--grey-500);
        font-weight: 500;
    }

    .header-right {
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }

    .search-container {
        position: relative;
        display: flex;
        align-items: center;
    }

    .search-input {
        background: var(--grey-50);
        border: 2px solid transparent;
        border-radius: 25px;
        padding: 0.75rem 1.2rem 0.75rem 3rem;
        font-size: 0.9rem;
        width: 350px;
        transition: var(--transition-fast);
        font-family: var(--font-main);
    }

    .search-input:focus {
        outline: none;
        border-color: var(--primary-green);
        background: var(--pure-white);
        box-shadow: 0 0 0 4px rgba(0, 109, 70, 0.1);
    }

    .search-icon {
        position: absolute;
        right: 1.2rem;
        color: var(--grey-500);
        font-size: 1.1rem;
    }

    .header-actions {
        display: flex;
        align-items: center;
        gap: 0.8rem;
    }

    .header-btn {
        width: 45px;
        height: 45px;
        background: var(--grey-50);
        border: 2px solid transparent;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: var(--transition-fast);
        color: var(--grey-700);
        position: relative;
        font-size: 1.1rem;
    }

    .header-btn:hover {
        background: var(--primary-green);
        color: var(--pure-white);
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }

    .notification-badge {
        position: absolute;
        top: -3px;
        left: -3px;
        background: var(--primary-light);
        color: var(--pure-white);
        font-size: 0.7rem;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        border: 2px solid var(--pure-white);
    }

    .user-profile {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 0.5rem 1rem;
        border-radius: 25px;
        cursor: pointer;
        transition: var(--transition-fast);
        border: 2px solid transparent;
    }

    .user-profile:hover {
        background: var(--grey-50);
        border-color: var(--primary-lighter);
    }

    .user-avatar {
        width: 40px;
        height: 40px;
        background: var(--gradient-primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--pure-white);
        font-weight: 700;
        font-size: 1rem;
        border: 2px solid var(--pure-white);
        box-shadow: var(--shadow-sm);
    }

    .user-info .user-name {
        font-weight: 700;
        color: var(--grey-900);
        font-size: 0.95rem;
        margin-bottom: 0.2rem;
    }

    .user-info .user-role {
        font-size: 0.8rem;
        color: var(--grey-500);
        font-weight: 500;
    }

    /* ===== التبويبات الرئيسية ===== */
    .dashboard-content {
        padding: 2.5rem;
        max-width: 100%;
        height: calc(100vh - var(--header-height));
        overflow: hidden;
    }

    .main-tabs {
        display: flex;
        background: var(--pure-white);
        border-radius: var(--border-radius-md);
        padding: 0.5rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-sm);
        border: 1px solid var(--grey-100);
    }

    .tab-button {
        flex: 1;
        padding: 1rem 2rem;
        background: transparent;
        border: none;
        border-radius: var(--border-radius-sm);
        font-family: var(--font-main);
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition-fast);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        color: var(--grey-700);
        font-size: 1rem;
    }

    .tab-button.active {
        background: var(--gradient-primary);
        color: var(--pure-white);
        box-shadow: var(--shadow-sm);
    }

    .tab-button:hover:not(.active) {
        background: var(--primary-lightest);
        color: var(--primary-green);
    }

    .tab-content {
        display: none;
        height: calc(100% - 120px);
        background: var(--pure-white);
        border-radius: var(--border-radius-md);
        box-shadow: var(--shadow-md);
        border: 1px solid var(--grey-100);
        overflow: hidden;
    }

    .tab-content.active {
        display: flex;
        flex-direction: column;
    }

    /* ===== نظام الدردشة ===== */
    .chat-container {
        display: flex;
        height: 100%;
    }

    .chat-sidebar {
        width: 350px;
        border-left: 1px solid var(--grey-100);
        display: flex;
        flex-direction: column;
    }

    .chat-sidebar-header {
        padding: 1.5rem;
        border-bottom: 1px solid var(--grey-100);
        background: var(--grey-50);
    }

    .chat-search {
        position: relative;
        margin-bottom: 1rem;
    }

    .chat-search input {
        width: 100%;
        padding: 0.75rem 1rem 0.75rem 2.5rem;
        border: 2px solid var(--grey-100);
        border-radius: 25px;
        font-family: var(--font-main);
        font-size: 0.9rem;
        transition: var(--transition-fast);
    }

    .chat-search input:focus {
        outline: none;
        border-color: var(--primary-green);
        box-shadow: 0 0 0 3px rgba(0, 109, 70, 0.1);
    }

    .chat-search i {
        position: absolute;
        right: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--grey-500);
    }

    .chat-filter-tabs {
        display: flex;
        gap: 0.5rem;
    }

    .filter-tab {
        padding: 0.5rem 1rem;
        background: var(--grey-100);
        border: none;
        border-radius: 15px;
        font-size: 0.8rem;
        cursor: pointer;
        transition: var(--transition-fast);
        font-family: var(--font-main);
        font-weight: 500;
    }

    .filter-tab.active {
        background: var(--primary-green);
        color: var(--pure-white);
    }

    .chat-list {
        flex: 1;
        overflow-y: auto;
        padding: 1rem;
    }

    .chat-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem;
        border-radius: var(--border-radius-sm);
        cursor: pointer;
        transition: var(--transition-fast);
        margin-bottom: 0.5rem;
        position: relative;
    }

    .chat-item:hover {
        background: var(--primary-lightest);
    }

    .chat-item.active {
        background: var(--primary-green);
        color: var(--pure-white);
    }

    .chat-avatar {
        position: relative;
        flex-shrink: 0;
    }

    .chat-avatar img,
    .chat-avatar .avatar-placeholder {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        object-fit: cover;
    }

    .avatar-placeholder {
        background: var(--gradient-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--pure-white);
        font-weight: 700;
        font-size: 1.2rem;
    }

    .status-indicator {
        position: absolute;
        bottom: 2px;
        left: 2px;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        border: 2px solid var(--pure-white);
    }

    .status-indicator.online { background: var(--online-status); }
    .status-indicator.away { background: var(--away-status); }
    .status-indicator.offline { background: var(--offline-status); }

    .chat-info {
        flex: 1;
        min-width: 0;
    }

    .chat-name {
        font-weight: 600;
        margin-bottom: 0.3rem;
        font-size: 0.95rem;
    }

    .chat-last-message {
        font-size: 0.8rem;
        opacity: 0.8;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .chat-time {
        font-size: 0.7rem;
        opacity: 0.7;
        margin-left: auto;
        flex-shrink: 0;
    }

    .unread-badge {
        position: absolute;
        top: 0.5rem;
        left: 0.5rem;
        background: var(--primary-light);
        color: var(--pure-white);
        font-size: 0.7rem;
        padding: 0.2rem 0.5rem;
        border-radius: 10px;
        min-width: 18px;
        text-align: center;
        font-weight: 700;
    }

    /* منطقة الدردشة الرئيسية */
    .chat-main {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .chat-header {
        padding: 1.5rem;
        border-bottom: 1px solid var(--grey-100);
        display: flex;
        align-items: center;
        gap: 1rem;
        background: var(--grey-50);
    }

    .chat-header-info {
        flex: 1;
    }

    .chat-header-name {
        font-weight: 700;
        font-size: 1.1rem;
        color: var(--grey-900);
    }

    .chat-header-status {
        font-size: 0.8rem;
        color: var(--grey-500);
        display: flex;
        align-items: center;
        gap: 0.3rem;
    }

    .chat-header-actions {
        display: flex;
        gap: 0.5rem;
    }

    .chat-header-btn {
        width: 40px;
        height: 40px;
        background: var(--pure-white);
        border: 1px solid var(--grey-200);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: var(--transition-fast);
        color: var(--grey-600);
    }

    .chat-header-btn:hover {
        background: var(--primary-green);
        color: var(--pure-white);
        border-color: var(--primary-green);
    }

    .messages-container {
        flex: 1;
        overflow-y: auto;
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .message {
        display: flex;
        align-items: flex-end;
        gap: 0.5rem;
        max-width: 70%;
    }

    .message.sent {
        align-self: flex-end;
        flex-direction: row-reverse;
    }

    .message.received {
        align-self: flex-start;
    }

    .message-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        flex-shrink: 0;
    }

    .message-content {
        background: var(--message-received);
        padding: 0.75rem 1rem;
        border-radius: 18px;
        font-size: 0.9rem;
        line-height: 1.4;
        position: relative;
    }

    .message.sent .message-content {
        background: var(--message-sent);
        color: var(--pure-white);
        border-bottom-left-radius: 18px;
        border-bottom-right-radius: 4px;
    }

    .message.received .message-content {
        border-bottom-left-radius: 4px;
        border-bottom-right-radius: 18px;
    }

    .message-time {
        font-size: 0.7rem;
        opacity: 0.7;
        margin-top: 0.3rem;
        text-align: center;
    }

    .message-file {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 1rem;
        background: var(--grey-50);
        border-radius: var(--border-radius-sm);
        border: 1px solid var(--grey-200);
        margin-top: 0.5rem;
    }

    .file-icon {
        width: 40px;
        height: 40px;
        background: var(--primary-green);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--pure-white);
        font-size: 1.2rem;
    }

    .file-info {
        flex: 1;
    }

    .file-name {
        font-weight: 600;
        font-size: 0.9rem;
        margin-bottom: 0.2rem;
    }

    .file-size {
        font-size: 0.7rem;
        color: var(--grey-500);
    }

    .file-download {
        background: none;
        border: none;
        color: var(--primary-green);
        cursor: pointer;
        font-size: 1.1rem;
        padding: 0.5rem;
        border-radius: 50%;
        transition: var(--transition-fast);
    }

    .file-download:hover {
        background: var(--primary-lightest);
    }

    .message-image {
        max-width: 100%;
        border-radius: var(--border-radius-sm);
        margin-top: 0.5rem;
        box-shadow: var(--shadow-sm);
    }

    /* مربع الكتابة */
    .chat-input-container {
        padding: 1.5rem;
        border-top: 1px solid var(--grey-100);
        background: var(--pure-white);
    }

    .chat-input-wrapper {
        display: flex;
        align-items: flex-end;
        gap: 1rem;
        background: var(--grey-50);
        border-radius: 25px;
        padding: 0.75rem 1rem;
        border: 2px solid transparent;
        transition: var(--transition-fast);
    }

    .chat-input-wrapper:focus-within {
        border-color: var(--primary-green);
        background: var(--pure-white);
        box-shadow: 0 0 0 3px rgba(0, 109, 70, 0.1);
    }

    .chat-input {
        flex: 1;
        border: none;
        background: transparent;
        font-family: var(--font-main);
        font-size: 0.95rem;
        resize: none;
        max-height: 120px;
        min-height: 20px;
        outline: none;
        color: var(--grey-700);
    }

    .chat-input::placeholder {
        color: var(--grey-500);
    }

    .chat-input-actions {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .input-action-btn {
        width: 36px;
        height: 36px;
        background: none;
        border: none;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: var(--transition-fast);
        color: var(--grey-600);
        font-size: 1.1rem;
    }

    .input-action-btn:hover {
        background: var(--primary-lightest);
        color: var(--primary-green);
    }

    .send-btn {
        background: var(--primary-green);
        color: var(--pure-white);
    }

    .send-btn:hover {
        background: var(--primary-dark);
        transform: scale(1.05);
    }

    /* ===== التقويم ===== */
    .calendar-container {
        display: flex;
        height: 100%;
    }

    .calendar-sidebar {
        width: 300px;
        border-left: 1px solid var(--grey-100);
        background: var(--grey-50);
        display: flex;
        flex-direction: column;
    }

    .calendar-sidebar-header {
        padding: 1.5rem;
        border-bottom: 1px solid var(--grey-100);
    }

    .calendar-sidebar-title {
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--grey-900);
        margin-bottom: 1rem;
    }

    .quick-add-event {
        background: var(--gradient-primary);
        color: var(--pure-white);
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 20px;
        font-family: var(--font-main);
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition-fast);
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }

    .quick-add-event:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }

    .calendar-filters {
        padding: 1.5rem;
        border-bottom: 1px solid var(--grey-100);
    }

    .filter-title {
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--grey-700);
        margin-bottom: 0.75rem;
    }

    .filter-list {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .filter-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        cursor: pointer;
        padding: 0.5rem 0;
        transition: var(--transition-fast);
    }

    .filter-item:hover {
        color: var(--primary-green);
    }

    .filter-color {
        width: 12px;
        height: 12px;
        border-radius: 50%;
    }

    .filter-color.meetings { background: #4caf50; }
    .filter-color.interviews { background: #2196f3; }
    .filter-color.deadlines { background: #ff9800; }
    .filter-color.personal { background: #9c27b0; }

    .upcoming-events {
        flex: 1;
        padding: 1.5rem;
        overflow-y: auto;
    }

    .upcoming-title {
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--grey-700);
        margin-bottom: 1rem;
    }

    .event-item {
        padding: 1rem;
        background: var(--pure-white);
        border-radius: var(--border-radius-sm);
        border-left: 4px solid var(--primary-green);
        margin-bottom: 0.75rem;
        box-shadow: var(--shadow-sm);
        cursor: pointer;
        transition: var(--transition-fast);
    }

    .event-item:hover {
        transform: translateX(-3px);
        box-shadow: var(--shadow-md);
    }

    .event-time {
        font-size: 0.8rem;
        color: var(--grey-500);
        font-weight: 500;
    }

    .event-title {
        font-weight: 600;
        color: var(--grey-900);
        margin: 0.3rem 0;
    }

    .event-description {
        font-size: 0.8rem;
        color: var(--grey-600);
    }

    .calendar-main {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .calendar-header {
        padding: 1.5rem;
        border-bottom: 1px solid var(--grey-100);
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: var(--grey-50);
    }

    .calendar-nav {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .calendar-nav-btn {
        width: 40px;
        height: 40px;
        background: var(--pure-white);
        border: 1px solid var(--grey-200);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: var(--transition-fast);
        color: var(--grey-600);
    }

    .calendar-nav-btn:hover {
        background: var(--primary-green);
        color: var(--pure-white);
        border-color: var(--primary-green);
    }

    .calendar-title {
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--grey-900);
    }

    .calendar-view-tabs {
        display: flex;
        gap: 0.5rem;
    }

    .view-tab {
        padding: 0.5rem 1rem;
        background: var(--grey-100);
        border: none;
        border-radius: 15px;
        font-size: 0.85rem;
        cursor: pointer;
        transition: var(--transition-fast);
        font-family: var(--font-main);
        font-weight: 500;
    }

    .view-tab.active {
        background: var(--primary-green);
        color: var(--pure-white);
    }

    .calendar-grid {
        flex: 1;
        padding: 1.5rem;
        overflow-y: auto;
    }

    .calendar-month {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 1px;
        background: var(--grey-200);
        border-radius: var(--border-radius-sm);
        overflow: hidden;
    }

    .calendar-header-row {
        display: contents;
    }

    .calendar-day-header {
        background: var(--primary-green);
        color: var(--pure-white);
        padding: 1rem;
        text-align: center;
        font-weight: 600;
        font-size: 0.85rem;
    }

    .calendar-day {
        background: var(--pure-white);
        min-height: 120px;
        padding: 0.75rem;
        display: flex;
        flex-direction: column;
        cursor: pointer;
        transition: var(--transition-fast);
        position: relative;
    }

    .calendar-day:hover {
        background: var(--primary-lightest);
    }

    .calendar-day.other-month {
        opacity: 0.3;
        background: var(--grey-50);
    }

    .calendar-day.today {
        background: var(--primary-lightest);
        border: 2px solid var(--primary-green);
    }

    .calendar-day.selected {
        background: var(--primary-green);
        color: var(--pure-white);
    }

    .day-number {
        font-weight: 600;
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
    }

    .day-events {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
    }

    .calendar-event {
        background: var(--primary-green);
        color: var(--pure-white);
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-size: 0.7rem;
        font-weight: 500;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        cursor: pointer;
    }

    .calendar-event.interview { background: #2196f3; }
    .calendar-event.meeting { background: #4caf50; }
    .calendar-event.deadline { background: #ff9800; }

    /* ===== إنشاء الاجتماعات ===== */
    .meeting-container {
        padding: 2rem;
        overflow-y: auto;
    }

    .meeting-header {
        text-align: center;
        margin-bottom: 3rem;
    }

    .meeting-title {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary-darker);
        margin-bottom: 0.5rem;
    }

    .meeting-subtitle {
        color: var(--grey-500);
        font-size: 1.1rem;
    }

    .meeting-options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-bottom: 3rem;
    }

    .meeting-option {
        background: var(--pure-white);
        border: 2px solid var(--grey-100);
        border-radius: var(--border-radius-lg);
        padding: 2rem;
        text-align: center;
        cursor: pointer;
        transition: var(--transition-medium);
        box-shadow: var(--shadow-sm);
    }

    .meeting-option:hover {
        border-color: var(--primary-light);
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
    }

    .meeting-option.selected {
        border-color: var(--primary-green);
        background: var(--primary-lightest);
    }

    .meeting-platform-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto 1.5rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.5rem;
        color: var(--pure-white);
        box-shadow: var(--shadow-md);
    }

    .zoom-icon { background: linear-gradient(135deg, #2d8cff, #1a73e8); }
    .teams-icon { background: linear-gradient(135deg, #464eb8, #6264a7); }
    .meet-icon { background: linear-gradient(135deg, #34a853, #0f9d58); }

    .platform-name {
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--grey-900);
        margin-bottom: 0.5rem;
    }

    .platform-description {
        color: var(--grey-600);
        font-size: 0.95rem;
        line-height: 1.5;
    }

    .meeting-form {
        background: var(--pure-white);
        border-radius: var(--border-radius-lg);
        padding: 2.5rem;
        box-shadow: var(--shadow-md);
        border: 1px solid var(--grey-100);
    }

    .form-section {
        margin-bottom: 2rem;
    }

    .section-title {
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--primary-darker);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
        margin-bottom: 1.5rem;
    }

    .form-group {
        display: flex;
        flex-direction: column;
    }

    .form-group.full-width {
        grid-column: 1 / -1;
    }

    .form-label {
        font-weight: 600;
        color: var(--grey-700);
        margin-bottom: 0.5rem;
        font-size: 0.95rem;
    }

    .form-input {
        padding: 0.875rem;
        border: 2px solid var(--grey-200);
        border-radius: var(--border-radius-sm);
        font-family: var(--font-main);
        font-size: 0.95rem;
        transition: var(--transition-fast);
        background: var(--pure-white);
    }

    .form-input:focus {
        outline: none;
        border-color: var(--primary-green);
        box-shadow: 0 0 0 3px rgba(0, 109, 70, 0.1);
    }

    .form-textarea {
        min-height: 100px;
        resize: vertical;
    }

    .attendees-input {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        padding: 0.5rem;
        border: 2px solid var(--grey-200);
        border-radius: var(--border-radius-sm);
        min-height: 50px;
        align-items: center;
    }

    .attendee-tag {
        background: var(--primary-green);
        color: var(--pure-white);
        padding: 0.3rem 0.75rem;
        border-radius: 15px;
        font-size: 0.8rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .remove-attendee {
        background: none;
        border: none;
        color: inherit;
        cursor: pointer;
        padding: 0;
        font-size: 0.9rem;
    }

    .attendees-input input {
        border: none;
        outline: none;
        flex: 1;
        min-width: 150px;
        font-family: var(--font-main);
    }

    .meeting-settings {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
    }

    .setting-option {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 1rem;
        background: var(--grey-50);
        border-radius: var(--border-radius-sm);
        cursor: pointer;
        transition: var(--transition-fast);
    }

    .setting-option:hover {
        background: var(--primary-lightest);
    }

    .setting-checkbox {
        width: 20px;
        height: 20px;
        border-radius: 4px;
        border: 2px solid var(--grey-300);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: var(--transition-fast);
    }

    .setting-checkbox.checked {
        background: var(--primary-green);
        border-color: var(--primary-green);
        color: var(--pure-white);
    }

    .form-actions {
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 1px solid var(--grey-200);
    }

    .btn {
        padding: 0.875rem 2rem;
        border-radius: 25px;
        border: 2px solid transparent;
        font-family: var(--font-main);
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition-medium);
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        text-decoration: none;
        font-size: 0.95rem;
        min-width: 150px;
        justify-content: center;
    }

    .btn-primary {
        background: var(--gradient-primary);
        color: var(--pure-white);
        box-shadow: var(--shadow-sm);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }

    .btn-secondary {
        background: var(--pure-white);
        color: var(--primary-green);
        border-color: var(--primary-green);
    }

    .btn-secondary:hover {
        background: var(--primary-green);
        color: var(--pure-white);
    }

    /* ===== النماذج المنبثقة ===== */
    .modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 2000;
        backdrop-filter: blur(5px);
    }

    .modal.active {
        display: flex;
    }

    .modal-content {
        background: var(--pure-white);
        padding: 2.5rem;
        border-radius: var(--border-radius-lg);
        box-shadow: var(--shadow-xl);
        width: 90%;
        max-width: 600px;
        max-height: 90vh;
        overflow-y: auto;
    }

    .modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid var(--grey-100);
    }

    .modal-title {
        font-size: 1.6rem;
        font-weight: 700;
        color: var(--primary-darker);
    }

    .close-btn {
        background: none;
        border: none;
        font-size: 1.8rem;
        color: var(--grey-500);
        cursor: pointer;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: var(--transition-fast);
    }

    .close-btn:hover {
        background: var(--grey-100);
        color: var(--grey-700);
    }

    /* ===== التصميم المتجاوب ===== */
    @media (max-width: 1200px) {
        .chat-container {
            flex-direction: column;
        }
        
        .chat-sidebar {
            width: 100%;
            max-height: 40%;
        }
        
        .calendar-container {
            flex-direction: column;
        }
        
        .calendar-sidebar {
            width: 100%;
            max-height: 30%;
        }
    }

    @media (max-width: 768px) {
        .sidebar {
            transform: translateX(100%);
            width: 100%;
            max-width: 350px;
        }
        
        .sidebar.active {
            transform: translateX(0);
        }
        
        .main-content {
            margin-right: 0;
        }
        
        .dashboard-header {
            padding: 0 1.5rem;
        }
        
        .search-input {
            width: 200px;
        }
        
        .dashboard-content {
            padding: 1.5rem;
        }
        
        .main-tabs {
            flex-direction: column;
        }
        
        .tab-button {
            padding: 0.75rem 1rem;
            font-size: 0.9rem;
        }
        
        .form-row {
            grid-template-columns: 1fr;
        }
        
        .meeting-options {
            grid-template-columns: 1fr;
        }
        
        .calendar-day {
            min-height: 80px;
            padding: 0.5rem;
        }
        
        .calendar-month {
            font-size: 0.8rem;
        }
    }

    /* ===== الأنيميشن ===== */
    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }

    @keyframes pulse {
        0%, 100% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.05);
        }
    }

    .animate-slide-in {
        animation: slideIn 0.6s ease-out;
    }

    .animate-fade-in {
        animation: fadeIn 0.8s ease-out;
    }

    .pulse {
        animation: pulse 2s infinite;
    }

    /* ===== تحسينات إضافية ===== */
    .typing-indicator {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1rem;
        color: var(--grey-500);
        font-style: italic;
        font-size: 0.85rem;
    }

    .typing-dots {
        display: flex;
        gap: 0.2rem;
    }

    .typing-dot {
        width: 6px;
        height: 6px;
        background: var(--grey-400);
        border-radius: 50%;
        animation: typing 1.4s infinite ease-in-out;
    }

    .typing-dot:nth-child(1) { animation-delay: 0s; }
    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }

    @keyframes typing {
        0%, 80%, 100% {
            transform: scale(0.8);
            opacity: 0.5;
        }
        40% {
            transform: scale(1);
            opacity: 1;
        }
    }

    .file-drop-zone {
        border: 2px dashed var(--grey-300);
        border-radius: var(--border-radius-sm);
        padding: 2rem;
        text-align: center;
        color: var(--grey-500);
        transition: var(--transition-fast);
        margin: 1rem 0;
    }

    .file-drop-zone.dragover {
        border-color: var(--primary-green);
        background: var(--primary-lightest);
        color: var(--primary-green);
    }

    /* فئات مساعدة */
    .text-center { text-align: center; }
    .text-left { text-align: left; }
    .text-right { text-align: right; }
    .mb-1 { margin-bottom: 0.5rem; }
    .mb-2 { margin-bottom: 1rem; }
    .mb-3 { margin-bottom: 1.5rem; }
    .mt-1 { margin-top: 0.5rem; }
    .mt-2 { margin-top: 1rem; }
    .flex { display: flex; }
    .flex-center { display: flex; align-items: center; justify-content: center; }
    .gap-1 { gap: 0.5rem; }
    .gap-2 { gap: 1rem; }
    .w-full { width: 100%; }
    .h-full { height: 100%; }
    .hidden { display: none; }
    .cursor-pointer { cursor: pointer; }
    </style>
</head>
<body>
    <div class="dashboard-layout">
        <!-- الشريط الجانبي -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <div class="sidebar-logo-icon">💬</div>
                    <div class="sidebar-logo-text">
                        <div class="sidebar-logo-main">شركة توافق</div>
                        <div class="sidebar-logo-sub">نظام الدردشة والمواعيد</div>
                    </div>
                </div>
                <div class="entity-badge">
                    <i class="fas fa-comments"></i>
                    <span>مركز التواصل</span>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">التواصل الفوري</div>
                    <ul>
                        <li class="nav-item">
                            <a href="#" class="nav-link active" data-tab="chat">
                                <i class="fas fa-comments"></i>
                                <span>الدردشة</span>
                                <span class="nav-badge">12</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-tab="calendar">
                                <i class="fas fa-calendar-alt"></i>
                                <span>التقويم</span>
                                <span class="nav-badge">5</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-tab="meetings">
                                <i class="fas fa-video"></i>
                                <span>إنشاء اجتماع</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">المرشحين النشطين</div>
                    <ul>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-user-circle"></i>
                                <span>محمد عبدالله</span>
                                <span class="nav-badge">3</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-user-circle"></i>
                                <span>فاطمة أحمد</span>
                                <span class="nav-badge">1</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-user-circle"></i>
                                <span>أحمد سالم</span>
                                <span class="nav-badge">2</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-user-circle"></i>
                                <span>ليلى محمود</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">فرق العمل</div>
                    <ul>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-users"></i>
                                <span>فريق الموارد البشرية</span>
                                <span class="nav-badge">8</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-users"></i>
                                <span>فريق التطوير</span>
                                <span class="nav-badge">5</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-users"></i>
                                <span>فريق التسويق</span>
                                <span class="nav-badge">3</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">الاجتماعات</div>
                    <ul>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-clock"></i>
                                <span>المجدولة اليوم</span>
                                <span class="nav-badge">4</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-history"></i>
                                <span>السابقة</span>
                                <span class="nav-badge">15</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-calendar-plus"></i>
                                <span>جدولة جديدة</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">الملفات والمستندات</div>
                    <ul>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-folder"></i>
                                <span>الملفات المشتركة</span>
                                <span class="nav-badge">67</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-file-pdf"></i>
                                <span>السير الذاتية</span>
                                <span class="nav-badge">124</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-download"></i>
                                <span>التحميلات</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">الإعدادات</div>
                    <ul>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-cog"></i>
                                <span>إعدادات الدردشة</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-bell"></i>
                                <span>إعدادات الإشعارات</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-user-cog"></i>
                                <span>الملف الشخصي</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>تسجيل الخروج</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>
        
        <!-- المحتوى الرئيسي -->
        <main class="main-content">
            <!-- رأس الصفحة -->
            <header class="dashboard-header">
                <div class="header-left">
                    <div class="breadcrumb">
                        <i class="fas fa-home"></i>
                        <span>الرئيسية</span>
                        <i class="fas fa-chevron-left"></i>
                        <span>مركز التواصل</span>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="ابحث في المحادثات والمرشحين...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    
                    <div class="header-actions">
                        <button class="header-btn" title="الإشعارات">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge">8</span>
                        </button>
                        <button class="header-btn" title="المكالمات">
                            <i class="fas fa-phone"></i>
                        </button>
                        <button class="header-btn" title="الفيديو">
                            <i class="fas fa-video"></i>
                        </button>
                        <button class="header-btn" title="الإعدادات">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                    
                    <div class="user-profile">
                        <div class="user-avatar">أ.س</div>
                        <div class="user-info">
                            <div class="user-name">أ. سارة أحمد</div>
                            <div class="user-role">مديرة الموارد البشرية</div>
                        </div>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </header>
            
            <!-- محتوى الصفحة -->
            <div class="dashboard-content">
                <!-- التبويبات الرئيسية -->
                <div class="main-tabs">
                    <button class="tab-button active" data-tab="chat">
                        <i class="fas fa-comments"></i>
                        الدردشة
                    </button>
                    <button class="tab-button" data-tab="calendar">
                        <i class="fas fa-calendar-alt"></i>
                        التقويم
                    </button>
                    <button class="tab-button" data-tab="meetings">
                        <i class="fas fa-video"></i>
                        إنشاء اجتماع
                    </button>
                </div>
                
                <!-- تبويب الدردشة -->
                <div id="chat-tab" class="tab-content active">
                    <div class="chat-container">
                        <!-- الشريط الجانبي للدردشة -->
                        <div class="chat-sidebar">
                            <div class="chat-sidebar-header">
                                <div class="chat-search">
                                    <input type="text" placeholder="ابحث عن محادثة...">
                                    <i class="fas fa-search"></i>
                                </div>
                                <div class="chat-filter-tabs">
                                    <button class="filter-tab active">الكل</button>
                                    <button class="filter-tab">غير مقروءة</button>
                                    <button class="filter-tab">مؤرشفة</button>
                                </div>
                            </div>
                            
                            <div class="chat-list">
                                <div class="chat-item active">
                                    <div class="chat-avatar">
                                        <div class="avatar-placeholder">م.ع</div>
                                        <div class="status-indicator online"></div>
                                    </div>
                                    <div class="chat-info">
                                        <div class="chat-name">محمد عبدالله</div>
                                        <div class="chat-last-message">شكراً لكم، متى المقابلة؟</div>
                                    </div>
                                    <div class="chat-time">10:30</div>
                                    <div class="unread-badge">3</div>
                                </div>
                                
                                <div class="chat-item">
                                    <div class="chat-avatar">
                                        <div class="avatar-placeholder">ف.أ</div>
                                        <div class="status-indicator online"></div>
                                    </div>
                                    <div class="chat-info">
                                        <div class="chat-name">فاطمة أحمد</div>
                                        <div class="chat-last-message">أرسلت لكم السيرة الذاتية المحدثة</div>
                                    </div>
                                    <div class="chat-time">09:45</div>
                                    <div class="unread-badge">1</div>
                                </div>
                                
                                <div class="chat-item">
                                    <div class="chat-avatar">
                                        <div class="avatar-placeholder">أ.س</div>
                                        <div class="status-indicator away"></div>
                                    </div>
                                    <div class="chat-info">
                                        <div class="chat-name">أحمد سالم</div>
                                        <div class="chat-last-message">هل يمكن تأجيل المقابلة؟</div>
                                    </div>
                                    <div class="chat-time">أمس</div>
                                    <div class="unread-badge">2</div>
                                </div>
                                
                                <div class="chat-item">
                                    <div class="chat-avatar">
                                        <div class="avatar-placeholder">ل.م</div>
                                        <div class="status-indicator offline"></div>
                                    </div>
                                    <div class="chat-info">
                                        <div class="chat-name">ليلى محمود</div>
                                        <div class="chat-last-message">تم إرسال نماذج التصميم</div>
                                    </div>
                                    <div class="chat-time">أمس</div>
                                </div>
                                
                                <div class="chat-item">
                                    <div class="chat-avatar">
                                        <div class="avatar-placeholder">ع.ر</div>
                                        <div class="status-indicator online"></div>
                                    </div>
                                    <div class="chat-info">
                                        <div class="chat-name">عمر رشيد</div>
                                        <div class="chat-last-message">مرحباً، هل الوظيفة متاحة؟</div>
                                    </div>
                                    <div class="chat-time">2 أيام</div>
                                </div>
                                
                                <div class="chat-item">
                                    <div class="chat-avatar">
                                        <div class="avatar-placeholder">ن.خ</div>
                                        <div class="status-indicator online"></div>
                                    </div>
                                    <div class="chat-info">
                                        <div class="chat-name">نورا خالد</div>
                                        <div class="chat-last-message">شكراً لإتاحة الفرصة</div>
                                    </div>
                                    <div class="chat-time">3 أيام</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- المنطقة الرئيسية للدردشة -->
                        <div class="chat-main">
                            <div class="chat-header">
                                <div class="chat-avatar">
                                    <div class="avatar-placeholder">م.ع</div>
                                    <div class="status-indicator online"></div>
                                </div>
                                <div class="chat-header-info">
                                    <div class="chat-header-name">محمد عبدالله أحمد</div>
                                    <div class="chat-header-status">
                                        <div class="status-indicator online"></div>
                                        متصل الآن
                                    </div>
                                </div>
                                <div class="chat-header-actions">
                                    <button class="chat-header-btn" title="مكالمة صوتية">
                                        <i class="fas fa-phone"></i>
                                    </button>
                                    <button class="chat-header-btn" title="مكالمة فيديو">
                                        <i class="fas fa-video"></i>
                                    </button>
                                    <button class="chat-header-btn" title="معلومات المحادثة">
                                        <i class="fas fa-info-circle"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="messages-container">
                                <div class="message received">
                                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%23003c6d'/><text x='50' y='60' font-size='30' text-anchor='middle' fill='white'>م.ع</text></svg>" class="message-avatar" alt="محمد عبدالله">
                                    <div class="message-content">
                                        السلام عليكم أستاذة سارة، أشكركم على قبول طلب التقديم. أريد أن أستفسر عن موعد المقابلة الشخصية.
                                        <div class="message-time">10:25 صباحاً</div>
                                    </div>
                                </div>
                                
                                <div class="message sent">
                                    <div class="message-content">
                                        وعليكم السلام محمد، مرحباً بك. سعداء بانضمامك للمرشحين المحتملين. سنقوم بجدولة المقابلة قريباً وسنرسل لك التفاصيل.
                                        <div class="message-time">10:27 صباحاً</div>
                                    </div>
                                </div>
                                
                                <div class="message received">
                                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%23003c6d'/><text x='50' y='60' font-size='30' text-anchor='middle' fill='white'>م.ع</text></svg>" class="message-avatar" alt="محمد عبدالله">
                                    <div class="message-content">
                                        شكراً لكم. هل يمكنني إرسال أعمالي السابقة ومشاريعي؟
                                        <div class="message-time">10:28 صباحاً</div>
                                    </div>
                                </div>
                                
                                <div class="message sent">
                                    <div class="message-content">
                                        بالطبع، سيكون هذا مفيداً جداً في تقييم مهاراتك. يمكنك إرسال الملفات هنا مباشرة.
                                        <div class="message-time">10:29 صباحاً</div>
                                    </div>
                                </div>
                                
                                <div class="message received">
                                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%23003c6d'/><text x='50' y='60' font-size='30' text-anchor='middle' fill='white'>م.ع</text></svg>" class="message-avatar" alt="محمد عبدالله">
                                    <div class="message-content">
                                        <div class="message-file">
                                            <div class="file-icon">
                                                <i class="fas fa-file-pdf"></i>
                                            </div>
                                            <div class="file-info">
                                                <div class="file-name">نماذج_مشاريع_التطوير.pdf</div>
                                                <div class="file-size">2.3 MB</div>
                                            </div>
                                            <button class="file-download">
                                                <i class="fas fa-download"></i>
                                            </button>
                                        </div>
                                        <div class="message-time">10:30 صباحاً</div>
                                    </div>
                                </div>
                                
                                <div class="message received">
                                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%23003c6d'/><text x='50' y='60' font-size='30' text-anchor='middle' fill='white'>م.ع</text></svg>" class="message-avatar" alt="محمد عبدالله">
                                    <div class="message-content">
                                        شكراً لكم، متى المقابلة؟
                                        <div class="message-time">10:30 صباحاً</div>
                                    </div>
                                </div>
                                
                                <div class="typing-indicator">
                                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%23003c6d'/><text x='50' y='60' font-size='30' text-anchor='middle' fill='white'>م.ع</text></svg>" class="message-avatar" alt="محمد عبدالله">
                                    <span>محمد يكتب...</span>
                                    <div class="typing-dots">
                                        <div class="typing-dot"></div>
                                        <div class="typing-dot"></div>
                                        <div class="typing-dot"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="chat-input-container">
                                <div class="chat-input-wrapper">
                                    <textarea class="chat-input" placeholder="اكتب رسالتك هنا..." rows="1"></textarea>
                                    <div class="chat-input-actions">
                                        <button class="input-action-btn" title="إرفاق ملف">
                                            <i class="fas fa-paperclip"></i>
                                        </button>
                                        <button class="input-action-btn" title="إرسال صورة">
                                            <i class="fas fa-image"></i>
                                        </button>
                                        <button class="input-action-btn" title="تسجيل صوتي">
                                            <i class="fas fa-microphone"></i>
                                        </button>
                                        <button class="input-action-btn send-btn" title="إرسال">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- تبويب التقويم -->
                <div id="calendar-tab" class="tab-content">
                    <div class="calendar-container">
                        <!-- الشريط الجانبي للتقويم -->
                        <div class="calendar-sidebar">
                            <div class="calendar-sidebar-header">
                                <div class="calendar-sidebar-title">إدارة المواعيد</div>
                                <button class="quick-add-event" onclick="showEventModal()">
                                    <i class="fas fa-plus"></i>
                                    إضافة موعد جديد
                                </button>
                            </div>
                            
                            <div class="calendar-filters">
                                <div class="filter-title">فلترة الأحداث</div>
                                <div class="filter-list">
                                    <div class="filter-item">
                                        <div class="filter-color meetings"></div>
                                        <span>اجتماعات الفريق</span>
                                    </div>
                                    <div class="filter-item">
                                        <div class="filter-color interviews"></div>
                                        <span>مقابلات المرشحين</span>
                                    </div>
                                    <div class="filter-item">
                                        <div class="filter-color deadlines"></div>
                                        <span>مواعيد نهائية</span>
                                    </div>
                                    <div class="filter-item">
                                        <div class="filter-color personal"></div>
                                        <span>مواعيد شخصية</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="upcoming-events">
                                <div class="upcoming-title">الأحداث القادمة</div>
                                
                                <div class="event-item">
                                    <div class="event-time">اليوم، 2:00 مساءً</div>
                                    <div class="event-title">مقابلة مع محمد عبدالله</div>
                                    <div class="event-description">مقابلة لوظيفة مطور تطبيقات موبايل</div>
                                </div>
                                
                                <div class="event-item">
                                    <div class="event-time">اليوم، 4:30 مساءً</div>
                                    <div class="event-title">اجتماع فريق الموارد البشرية</div>
                                    <div class="event-description">مراجعة استراتيجية التوظيف</div>
                                </div>
                                
                                <div class="event-item">
                                    <div class="event-time">غداً، 10:00 صباحاً</div>
                                    <div class="event-title">مقابلة مع فاطمة أحمد</div>
                                    <div class="event-description">مقابلة لوظيفة مديرة تسويق</div>
                                </div>
                                
                                <div class="event-item">
                                    <div class="event-time">غداً، 3:00 مساءً</div>
                                    <div class="event-title">عرض المشروع الجديد</div>
                                    <div class="event-description">عرض نظام إدارة الموارد البشرية</div>
                                </div>
                                
                                <div class="event-item">
                                    <div class="event-time">الأحد، 11:00 صباحاً</div>
                                    <div class="event-title">ورشة تدريبية</div>
                                    <div class="event-description">تطوير مهارات المقابلات</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- التقويم الرئيسي -->
                        <div class="calendar-main">
                            <div class="calendar-header">
                                <div class="calendar-nav">
                                    <button class="calendar-nav-btn">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                    <div class="calendar-title">أغسطس 2025</div>
                                    <button class="calendar-nav-btn">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                </div>
                                
                                <div class="calendar-view-tabs">
                                    <button class="view-tab">يوم</button>
                                    <button class="view-tab">أسبوع</button>
                                    <button class="view-tab active">شهر</button>
                                    <button class="view-tab">سنة</button>
                                </div>
                            </div>
                            
                            <div class="calendar-grid">
                                <div class="calendar-month">
                                    <div class="calendar-header-row">
                                        <div class="calendar-day-header">السبت</div>
                                        <div class="calendar-day-header">الأحد</div>
                                        <div class="calendar-day-header">الاثنين</div>
                                        <div class="calendar-day-header">الثلاثاء</div>
                                        <div class="calendar-day-header">الأربعاء</div>
                                        <div class="calendar-day-header">الخميس</div>
                                        <div class="calendar-day-header">الجمعة</div>
                                    </div>
                                    
                                    <!-- أسبوع 1 -->
                                    <div class="calendar-day other-month">
                                        <div class="day-number">29</div>
                                    </div>
                                    <div class="calendar-day other-month">
                                        <div class="day-number">30</div>
                                    </div>
                                    <div class="calendar-day other-month">
                                        <div class="day-number">31</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">1</div>
                                        <div class="day-events">
                                            <div class="calendar-event meeting">اجتماع افتتاحي</div>
                                        </div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">2</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">3</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">4</div>
                                        <div class="day-events">
                                            <div class="calendar-event interview">مقابلة أحمد</div>
                                        </div>
                                    </div>
                                    
                                    <!-- أسبوع 2 -->
                                    <div class="calendar-day">
                                        <div class="day-number">5</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">6</div>
                                        <div class="day-events">
                                            <div class="calendar-event meeting">تقييم الأداء</div>
                                        </div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">7</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">8</div>
                                        <div class="day-events">
                                            <div class="calendar-event interview">مقابلة فاطمة</div>
                                            <div class="calendar-event meeting">اجتماع فريق</div>
                                        </div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">9</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">10</div>
                                        <div class="day-events">
                                            <div class="calendar-event deadline">موعد نهائي</div>
                                        </div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">11</div>
                                    </div>
                                    
                                    <!-- أسبوع 3 -->
                                    <div class="calendar-day">
                                        <div class="day-number">12</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">13</div>
                                        <div class="day-events">
                                            <div class="calendar-event meeting">ورشة تدريبية</div>
                                        </div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">14</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">15</div>
                                        <div class="day-events">
                                            <div class="calendar-event interview">مقابلة عمر</div>
                                        </div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">16</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">17</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">18</div>
                                        <div class="day-events">
                                            <div class="calendar-event meeting">مراجعة شهرية</div>
                                        </div>
                                    </div>
                                    
                                    <!-- أسبوع 4 -->
                                    <div class="calendar-day">
                                        <div class="day-number">19</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">20</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">21</div>
                                        <div class="day-events">
                                            <div class="calendar-event interview">مقابلة ليلى</div>
                                        </div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">22</div>
                                    </div>
                                    <div class="calendar-day today">
                                        <div class="day-number">23</div>
                                        <div class="day-events">
                                            <div class="calendar-event interview">مقابلة محمد</div>
                                            <div class="calendar-event meeting">اجتماع فريق</div>
                                        </div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">24</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">25</div>
                                        <div class="day-events">
                                            <div class="calendar-event deadline">تقرير شهري</div>
                                        </div>
                                    </div>
                                    
                                    <!-- أسبوع 5 -->
                                    <div class="calendar-day">
                                        <div class="day-number">26</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">27</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">28</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">29</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">30</div>
                                    </div>
                                    <div class="calendar-day">
                                        <div class="day-number">31</div>
                                    </div>
                                    <div class="calendar-day other-month">
                                        <div class="day-number">1</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- تبويب إنشاء الاجتماعات -->
                <div id="meetings-tab" class="tab-content">
                    <div class="meeting-container">
                        <div class="meeting-header">
                            <h2 class="meeting-title">إنشاء اجتماع جديد</h2>
                            <p class="meeting-subtitle">اختر منصة الاجتماع وأدخل التفاصيل</p>
                        </div>
                        
                        <div class="meeting-options">
                            <div class="meeting-option" data-platform="zoom">
                                <div class="meeting-platform-icon zoom-icon">
                                    <i class="fas fa-video"></i>
                                </div>
                                <h3 class="platform-name">Zoom Meeting</h3>
                                <p class="platform-description">اجتماع عبر منصة زووم مع إمكانيات متقدمة للتسجيل والمشاركة</p>
                            </div>
                            
                            <div class="meeting-option" data-platform="teams">
                                <div class="meeting-platform-icon teams-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <h3 class="platform-name">Microsoft Teams</h3>
                                <p class="platform-description">اجتماع عبر تيمز مع تكامل كامل مع أدوات مايكروسوفت</p>
                            </div>
                            
                            <div class="meeting-option" data-platform="meet">
                                <div class="meeting-platform-icon meet-icon">
                                    <i class="fas fa-globe"></i>
                                </div>
                                <h3 class="platform-name">Google Meet</h3>
                                <p class="platform-description">اجتماع عبر جوجل ميت مع سهولة الوصول والانضمام</p>
                            </div>
                        </div>
                        
                        <div class="meeting-form">
                            <form id="meetingForm">
                                <div class="form-section">
                                    <h3 class="section-title">
                                        <i class="fas fa-info-circle"></i>
                                        معلومات الاجتماع
                                    </h3>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label class="form-label">عنوان الاجتماع</label>
                                            <input type="text" class="form-input" placeholder="مقابلة مع محمد عبدالله" required>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">نوع الاجتماع</label>
                                            <select class="form-input" required>
                                                <option value="">اختر نوع الاجتماع</option>
                                                <option value="interview">مقابلة شخصية</option>
                                                <option value="team">اجتماع فريق</option>
                                                <option value="presentation">عرض تقديمي</option>
                                                <option value="training">تدريب</option>
                                                <option value="consultation">استشارة</option>
                                                <option value="other">أخرى</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group full-width">
                                        <label class="form-label">وصف الاجتماع</label>
                                        <textarea class="form-input form-textarea" placeholder="وصف مختصر عن موضوع الاجتماع وأهدافه..."></textarea>
                                    </div>
                                </div>
                                
                                <div class="form-section">
                                    <h3 class="section-title">
                                        <i class="fas fa-calendar-alt"></i>
                                        التاريخ والوقت
                                    </h3>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label class="form-label">تاريخ الاجتماع</label>
                                            <input type="date" class="form-input" required>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">وقت البداية</label>
                                            <input type="time" class="form-input" required>
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label class="form-label">مدة الاجتماع (بالدقائق)</label>
                                            <select class="form-input">
                                                <option value="15">15 دقيقة</option>
                                                <option value="30" selected>30 دقيقة</option>
                                                <option value="45">45 دقيقة</option>
                                                <option value="60">ساعة واحدة</option>
                                                <option value="90">ساعة ونصف</option>
                                                <option value="120">ساعتان</option>
                                                <option value="custom">مدة مخصصة</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">المنطقة الزمنية</label>
                                            <select class="form-input">
                                                <option value="asia/riyadh" selected>توقيت الرياض (GMT+3)</option>
                                                <option value="asia/dubai">توقيت دبي (GMT+4)</option>
                                                <option value="africa/cairo">توقيت القاهرة (GMT+2)</option>
                                                <option value="utc">التوقيت العالمي (UTC)</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-section">
                                    <h3 class="section-title">
                                        <i class="fas fa-users"></i>
                                        المشاركون
                                    </h3>
                                    
                                    <div class="form-group full-width">
                                        <label class="form-label">إضافة مشاركين (البريد الإلكتروني)</label>
                                        <div class="attendees-input" id="attendeesInput">
                                            <input type="email" placeholder="أدخل البريد الإلكتروني واضغط Enter">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group full-width">
                                        <label class="form-label">رسالة للمشاركين</label>
                                        <textarea class="form-input form-textarea" placeholder="رسالة اختيارية للمشاركين حول الاجتماع..."></textarea>
                                    </div>
                                </div>
                                
                                <div class="form-section">
                                    <h3 class="section-title">
                                        <i class="fas fa-cog"></i>
                                        إعدادات الاجتماع
                                    </h3>
                                    
                                    <div class="meeting-settings">
                                        <div class="setting-option" onclick="toggleSetting(this)">
                                            <div class="setting-checkbox checked">
                                                <i class="fas fa-check"></i>
                                            </div>
                                            <div>
                                                <strong>إرسال تذكيرات</strong><br>
                                                <small>إرسال تذكيرات للمشاركين قبل الاجتماع</small>
                                            </div>
                                        </div>
                                        
                                        <div class="setting-option" onclick="toggleSetting(this)">
                                            <div class="setting-checkbox">
                                                <i class="fas fa-check"></i>
                                            </div>
                                            <div>
                                                <strong>تسجيل الاجتماع</strong><br>
                                                <small>تسجيل الاجتماع تلقائياً عند البدء</small>
                                            </div>
                                        </div>
                                        
                                        <div class="setting-option" onclick="toggleSetting(this)">
                                            <div class="setting-checkbox checked">
                                                <i class="fas fa-check"></i>
                                            </div>
                                            <div>
                                                <strong>غرفة انتظار</strong><br>
                                                <small>وضع المشاركين في غرفة انتظار</small>
                                            </div>
                                        </div>
                                        
                                        <div class="setting-option" onclick="toggleSetting(this)">
                                            <div class="setting-checkbox">
                                                <i class="fas fa-check"></i>
                                            </div>
                                            <div>
                                                <strong>كتم الميكروفون</strong><br>
                                                <small>كتم ميكروفون المشاركين عند الانضمام</small>
                                            </div>
                                        </div>
                                        
                                        <div class="setting-option" onclick="toggleSetting(this)">
                                            <div class="setting-checkbox checked">
                                                <i class="fas fa-check"></i>
                                            </div>
                                            <div>
                                                <strong>مشاركة الشاشة</strong><br>
                                                <small>السماح للمشاركين بمشاركة الشاشة</small>
                                            </div>
                                        </div>
                                        
                                        <div class="setting-option" onclick="toggleSetting(this)">
                                            <div class="setting-checkbox">
                                                <i class="fas fa-check"></i>
                                            </div>
                                            <div>
                                                <strong>اجتماع متكرر</strong><br>
                                                <small>جعل هذا الاجتماع متكرراً</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-calendar-plus"></i>
                                        إنشاء الاجتماع
                                    </button>
                                    <button type="button" class="btn btn-secondary">
                                        <i class="fas fa-save"></i>
                                        حفظ كمسودة
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- نموذج إضافة حدث للتقويم -->
    <div id="eventModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">إضافة حدث جديد</h3>
                <button class="close-btn" onclick="closeModal('eventModal')">&times;</button>
            </div>
            <form id="eventForm">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">عنوان الحدث</label>
                        <input type="text" class="form-input" placeholder="مقابلة مع المرشح" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">نوع الحدث</label>
                        <select class="form-input" required>
                            <option value="">اختر النوع</option>
                            <option value="meeting">اجتماع</option>
                            <option value="interview">مقابلة</option>
                            <option value="deadline">موعد نهائي</option>
                            <option value="personal">شخصي</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">التاريخ</label>
                        <input type="date" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">الوقت</label>
                        <input type="time" class="form-input" required>
                    </div>
                </div>
                
                <div class="form-group full-width">
                    <label class="form-label">الوصف</label>
                    <textarea class="form-input" rows="3" placeholder="تفاصيل الحدث..."></textarea>
                </div>
                
                <div class="form-row" style="margin-top: 2rem;">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        إضافة الحدث
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('eventModal')">
                        <i class="fas fa-times"></i>
                        إلغاء
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- نموذج معلومات المحادثة -->
    <div id="chatInfoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">معلومات المحادثة</h3>
                <button class="close-btn" onclick="closeModal('chatInfoModal')">&times;</button>
            </div>
            <div style="padding: 1rem 0;">
                <div class="flex-center mb-3">
                    <div class="user-avatar" style="width: 80px; height: 80px; font-size: 2rem;">م.ع</div>
                </div>
                <h3 class="text-center mb-2">محمد عبدالله أحمد</h3>
                <p class="text-center text-gray mb-3">مطور تطبيقات موبايل</p>
                
                <div class="mb-3">
                    <strong>الحالة:</strong> 
                    <span style="color: var(--online-status);">
                        <i class="fas fa-circle"></i> متصل الآن
                    </span>
                </div>
                
                <div class="mb-3">
                    <strong>آخر ظهور:</strong> الآن
                </div>
                
                <div class="mb-3">
                    <strong>البريد الإلكتروني:</strong> mohammed.abdullah@email.com
                </div>
                
                <div class="mb-3">
                    <strong>رقم الهاتف:</strong> +966 50 123 4567
                </div>
                
                <div class="form-actions">
                    <button class="btn btn-primary">
                        <i class="fas fa-calendar"></i>
                        جدولة مقابلة
                    </button>
                    <button class="btn btn-secondary">
                        <i class="fas fa-file"></i>
                        عرض السيرة الذاتية
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        /**
         * نظام الدردشة والمواعيد - شركة توافق
         * نظام متطور للتواصل وإدارة المواعيد - الإصدار 1.0
         */

        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 تم تحميل نظام الدردشة والمواعيد لشركة توافق بنجاح');

            // === إدارة التبويبات ===
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            const navLinks = document.querySelectorAll('.nav-link');

            function switchTab(tabId) {
                // إخفاء جميع التبويبات
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });
                
                // إزالة الفئة النشطة من جميع الأزرار
                tabButtons.forEach(button => {
                    button.classList.remove('active');
                });
                
                // عرض التبويب المحدد
                const targetTab = document.getElementById(tabId + '-tab');
                const targetButton = document.querySelector(`[data-tab="${tabId}"]`);
                
                if (targetTab && targetButton) {
                    targetTab.classList.add('active');
                    targetButton.classList.add('active');
                }
                
                console.log('تم التبديل إلى تبويب:', tabId);
            }

            // استمع لنقرات أزرار التبويبات
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });

            // استمع لنقرات الشريط الجانبي
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const tabId = this.getAttribute('data-tab');
                    if (tabId) {
                        switchTab(tabId);
                        
                        // تحديث الشريط الجانبي
                        navLinks.forEach(l => l.classList.remove('active'));
                        this.classList.add('active');
                    }
                });
            });

            // === نظام الدردشة ===
            const chatItems = document.querySelectorAll('.chat-item');
            const messagesContainer = document.querySelector('.messages-container');
            const chatInput = document.querySelector('.chat-input');
            const sendBtn = document.querySelector('.send-btn');
            const chatHeaderName = document.querySelector('.chat-header-name');
            const chatHeaderStatus = document.querySelector('.chat-header-status');

            // تبديل المحادثات
            chatItems.forEach(item => {
                item.addEventListener('click', function() {
                    // إزالة التحديد من جميع المحادثات
                    chatItems.forEach(chat => chat.classList.remove('active'));
                    
                    // تحديد المحادثة الحالية
                    this.classList.add('active');
                    
                    // إزالة شارة عدم القراءة
                    const unreadBadge = this.querySelector('.unread-badge');
                    if (unreadBadge) {
                        unreadBadge.remove();
                    }
                    
                    // تحديث معلومات المحادثة
                    const chatName = this.querySelector('.chat-name').textContent;
                    const statusIndicator = this.querySelector('.status-indicator');
                    const statusClass = statusIndicator.classList.contains('online') ? 'online' : 
                                       statusIndicator.classList.contains('away') ? 'away' : 'offline';
                    
                    chatHeaderName.textContent = chatName;
                    chatHeaderStatus.innerHTML = `
                        <div class="status-indicator ${statusClass}"></div>
                        ${statusClass === 'online' ? 'متصل الآن' : 
                          statusClass === 'away' ? 'غير متاح' : 'غير متصل'}
                    `;
                    
                    // تحميل رسائل المحادثة
                    loadChatMessages(chatName);
                    
                    console.log('تم تحديد المحادثة:', chatName);
                });
            });

            // تحميل رسائل المحادثة
            function loadChatMessages(chatName) {
                // محاكاة تحميل الرسائل
                const sampleMessages = generateSampleMessages(chatName);
                displayMessages(sampleMessages);
            }

            function generateSampleMessages(chatName) {
                const messageTemplates = {
                    'محمد عبدالله': [
                        { type: 'received', content: 'السلام عليكم أستاذة سارة، أشكركم على قبول طلب التقديم.', time: '10:25' },
                        { type: 'sent', content: 'وعليكم السلام محمد، مرحباً بك. سعداء بانضمامك للمرشحين المحتملين.', time: '10:27' },
                        { type: 'received', content: 'شكراً لكم، متى المقابلة؟', time: '10:30' }
                    ],
                    'فاطمة أحمد': [
                        { type: 'received', content: 'مرحباً، أرسلت لكم السيرة الذاتية المحدثة.', time: '09:45' },
                        { type: 'sent', content: 'شكراً فاطمة، سنراجعها ونعود إليك قريباً.', time: '09:47' }
                    ],
                    'أحمد سالم': [
                        { type: 'received', content: 'هل يمكن تأجيل المقابلة لظرف طارئ؟', time: 'أمس' },
                        { type: 'sent', content: 'بالطبع، سنعيد جدولة المقابلة. ما الوقت المناسب لك؟', time: 'أمس' }
                    ]
                };
                
                return messageTemplates[chatName] || [
                    { type: 'received', content: 'مرحباً!', time: 'الآن' }
                ];
            }

            function displayMessages(messages) {
                messagesContainer.innerHTML = '';
                
                messages.forEach(message => {
                    const messageElement = createMessageElement(message);
                    messagesContainer.appendChild(messageElement);
                });
                
                // التمرير إلى أسفل
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }

            function createMessageElement(message) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${message.type}`;
                
                if (message.type === 'received') {
                    messageDiv.innerHTML = `
                        <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%23003c6d'/><text x='50' y='60' font-size='30' text-anchor='middle' fill='white'>م.ع</text></svg>" class="message-avatar" alt="مرسل">
                        <div class="message-content">
                            ${message.content}
                            <div class="message-time">${message.time}</div>
                        </div>
                    `;
                } else {
                    messageDiv.innerHTML = `
                        <div class="message-content">
                            ${message.content}
                            <div class="message-time">${message.time}</div>
                        </div>
                    `;
                }
                
                return messageDiv;
            }

            // إرسال الرسائل
            function sendMessage() {
                const messageText = chatInput.value.trim();
                if (messageText === '') return;
                
                const currentTime = new Date().toLocaleTimeString('ar-SA', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const message = {
                    type: 'sent',
                    content: messageText,
                    time: currentTime
                };
                
                const messageElement = createMessageElement(message);
                messagesContainer.appendChild(messageElement);
                
                // مسح النص
                chatInput.value = '';
                
                // التمرير إلى أسفل
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                // محاكاة رد تلقائي
                setTimeout(() => {
                    simulateReply();
                }, 2000);
                
                console.log('تم إرسال الرسالة:', messageText);
            }

            function simulateReply() {
                const replies = [
                    'شكراً لكم على التواصل',
                    'سأقوم بمراجعة هذا الأمر',
                    'ممتاز، سنتابع معكم قريباً',
                    'تم استلام المعلومات',
                    'سأعود إليكم بالتفاصيل'
                ];
                
                const randomReply = replies[Math.floor(Math.random() * replies.length)];
                const currentTime = new Date().toLocaleTimeString('ar-SA', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const replyMessage = {
                    type: 'received',
                    content: randomReply,
                    time: currentTime
                };
                
                const messageElement = createMessageElement(replyMessage);
                messagesContainer.appendChild(messageElement);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }

            // استمع لنقرة زر الإرسال
            sendBtn.addEventListener('click', sendMessage);

            // استمع لضغطة Enter في حقل النص
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // تحديث حجم النص تلقائياً
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 120) + 'px';
            });

            // === إدارة التقويم ===
            const calendarDays = document.querySelectorAll('.calendar-day');
            const calendarTitle = document.querySelector('.calendar-title');
            const prevBtn = document.querySelector('.calendar-nav-btn:first-child');
            const nextBtn = document.querySelector('.calendar-nav-btn:last-child');
            
            let currentDate = new Date();

            // تفاعل أيام التقويم
            calendarDays.forEach(day => {
                day.addEventListener('click', function() {
                    // إزالة التحديد من جميع الأيام
                    calendarDays.forEach(d => d.classList.remove('selected'));
                    
                    // تحديد اليوم المنقور
                    this.classList.add('selected');
                    
                    const dayNumber = this.querySelector('.day-number').textContent;
                    console.log('تم اختيار اليوم:', dayNumber);
                    
                    // عرض أحداث اليوم
                    showDayEvents(dayNumber);
                });
            });

            function showDayEvents(day) {
                // محاكاة عرض أحداث اليوم
                const events = document.querySelectorAll('.calendar-day.selected .calendar-event');
                if (events.length > 0) {
                    console.log(`أحداث يوم ${day}:`, Array.from(events).map(e => e.textContent));
                } else {
                    console.log(`لا توجد أحداث في يوم ${day}`);
                }
            }

            // التنقل في التقويم
            prevBtn.addEventListener('click', function() {
                currentDate.setMonth(currentDate.getMonth() - 1);
                updateCalendarTitle();
                console.log('الانتقال للشهر السابق');
            });

            nextBtn.addEventListener('click', function() {
                currentDate.setMonth(currentDate.getMonth() + 1);
                updateCalendarTitle();
                console.log('الانتقال للشهر التالي');
            });

            function updateCalendarTitle() {
                const months = [
                    'يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو',
                    'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'
                ];
                
                const monthName = months[currentDate.getMonth()];
                const year = currentDate.getFullYear();
                calendarTitle.textContent = `${monthName} ${year}`;
            }

            // === إدارة الاجتماعات ===
            const meetingOptions = document.querySelectorAll('.meeting-option');
            const meetingForm = document.getElementById('meetingForm');
            const attendeesInput = document.getElementById('attendeesInput');
            
            let selectedPlatform = 'zoom'; // افتراضي

            // اختيار منصة الاجتماع
            meetingOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // إزالة التحديد من جميع المنصات
                    meetingOptions.forEach(opt => opt.classList.remove('selected'));
                    
                    // تحديد المنصة المختارة
                    this.classList.add('selected');
                    selectedPlatform = this.getAttribute('data-platform');
                    
                    console.log('تم اختيار المنصة:', selectedPlatform);
                });
            });

            // إدارة المشاركين
            const attendeesInputField = attendeesInput.querySelector('input');
            let attendees = [];

            attendeesInputField.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const email = this.value.trim();
                    
                    if (email && isValidEmail(email)) {
                        addAttendee(email);
                        this.value = '';
                    } else if (email) {
                        showNotification('البريد الإلكتروني غير صحيح', 'error');
                    }
                }
            });

            function isValidEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }

            function addAttendee(email) {
                if (attendees.includes(email)) {
                    showNotification('هذا البريد مضاف مسبقاً', 'warning');
                    return;
                }
                
                attendees.push(email);
                
                const tag = document.createElement('div');
                tag.className = 'attendee-tag';
                tag.innerHTML = `
                    ${email}
                    <button class="remove-attendee" onclick="removeAttendee('${email}')">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                attendeesInput.insertBefore(tag, attendeesInputField);
                console.log('تم إضافة المشارك:', email);
            }

            window.removeAttendee = function(email) {
                attendees = attendees.filter(a => a !== email);
                const tags = attendeesInput.querySelectorAll('.attendee-tag');
                tags.forEach(tag => {
                    if (tag.textContent.includes(email)) {
                        tag.remove();
                    }
                });
                console.log('تم حذف المشارك:', email);
            };

            // معالجة نموذج الاجتماع
            meetingForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = new FormData(this);
                const meetingData = {
                    platform: selectedPlatform,
                    title: formData.get('title'),
                    type: formData.get('type'),
                    description: formData.get('description'),
                    date: formData.get('date'),
                    time: formData.get('time'),
                    duration: formData.get('duration'),
                    timezone: formData.get('timezone'),
                    attendees: attendees,
                    settings: getSelectedSettings()
                };
                
                console.log('بيانات الاجتماع:', meetingData);
                
                // محاكاة إنشاء الاجتماع
                createMeeting(meetingData);
            });

            function getSelectedSettings() {
                const settings = {};
                const settingOptions = document.querySelectorAll('.setting-option');
                
                settingOptions.forEach(option => {
                    const checkbox = option.querySelector('.setting-checkbox');
                    const text = option.querySelector('strong').textContent;
                    settings[text] = checkbox.classList.contains('checked');
                });
                
                return settings;
            }

            function createMeeting(meetingData) {
                const submitBtn = meetingForm.querySelector('button[type="submit"]');
                const originalText = submitBtn.innerHTML;
                
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> جاري الإنشاء...';
                submitBtn.disabled = true;
                
                // محاكاة إنشاء الاجتماع
                setTimeout(() => {
                    const meetingLink = generateMeetingLink(meetingData.platform);
                    
                    submitBtn.innerHTML = '<i class="fas fa-check"></i> تم الإنشاء بنجاح';
                    
                    setTimeout(() => {
                        showMeetingSuccess(meetingData, meetingLink);
                        submitBtn.innerHTML = originalText;
                        submitBtn.disabled = false;
                        meetingForm.reset();
                        attendees = [];
                        attendeesInput.querySelectorAll('.attendee-tag').forEach(tag => tag.remove());
                    }, 1500);
                }, 3000);
            }

            function generateMeetingLink(platform) {
                const meetingId = Math.random().toString(36).substring(2, 15);
                const links = {
                    'zoom': `https://zoom.us/j/${meetingId}`,
                    'teams': `https://teams.microsoft.com/l/meetup-join/${meetingId}`,
                    'meet': `https://meet.google.com/${meetingId}`
                };
                
                return links[platform] || links.zoom;
            }

            function showMeetingSuccess(meetingData, meetingLink) {
                const modal = document.createElement('div');
                modal.className = 'modal active';
                modal.innerHTML = `
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title">تم إنشاء الاجتماع بنجاح!</h3>
                            <button class="close-btn" onclick="this.closest('.modal').remove()">&times;</button>
                        </div>
                        <div style="padding: 1rem 0; text-align: center;">
                            <div style="font-size: 3rem; color: var(--primary-green); margin-bottom: 1rem;">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <h3 style="margin-bottom: 1rem;">${meetingData.title}</h3>
                            <p style="margin-bottom: 2rem; color: var(--grey-600);">
                                ${meetingData.date} في ${meetingData.time}
                            </p>
                            <div style="background: var(--grey-50); padding: 1rem; border-radius: 8px; margin-bottom: 2rem;">
                                <strong>رابط الاجتماع:</strong><br>
                                <a href="${meetingLink}" target="_blank" style="color: var(--primary-green); word-break: break-all;">
                                    ${meetingLink}
                                </a>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn-primary" onclick="copyToClipboard('${meetingLink}')">
                                    <i class="fas fa-copy"></i>
                                    نسخ الرابط
                                </button>
                                <button class="btn btn-secondary" onclick="this.closest('.modal').remove()">
                                    <i class="fas fa-times"></i>
                                    إغلاق
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
            }

            // === الوظائف المساعدة ===

            // تبديل إعدادات الاجتماع
            window.toggleSetting = function(element) {
                const checkbox = element.querySelector('.setting-checkbox');
                checkbox.classList.toggle('checked');
            };

            // عرض النماذج المنبثقة
            window.showEventModal = function() {
                document.getElementById('eventModal').classList.add('active');
            };

            window.showChatInfo = function() {
                document.getElementById('chatInfoModal').classList.add('active');
            };

            window.closeModal = function(modalId) {
                document.getElementById(modalId).classList.remove('active');
            };

            // نسخ النص للحافظة
            window.copyToClipboard = function(text) {
                navigator.clipboard.writeText(text).then(() => {
                    showNotification('تم نسخ الرابط بنجاح', 'success');
                }).catch(() => {
                    showNotification('فشل في نسخ الرابط', 'error');
                });
            };

            // عرض الإشعارات
            function showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `alert alert-${type}`;
                notification.innerHTML = `
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 
                                      type === 'error' ? 'exclamation-triangle' : 
                                      'info-circle'}"></i>
                    <div><strong>${message}</strong></div>
                `;
                notification.style.cssText = `
                    position: fixed;
                    top: 2rem;
                    right: 2rem;
                    z-index: 10000;
                    max-width: 400px;
                    animation: slideIn 0.5s ease-out;
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                }, 4000);
            }

            // إغلاق النماذج عند النقر خارجها
            document.addEventListener('click', function(e) {
                const modals = document.querySelectorAll('.modal.active');
                modals.forEach(modal => {
                    if (e.target === modal) {
                        modal.classList.remove('active');
                    }
                });
            });

            // === محاكاة التحديثات المباشرة ===
            
            // تحديث الحالة المتصلة
            function updateOnlineStatus() {
                const statusIndicators = document.querySelectorAll('.status-indicator');
                statusIndicators.forEach(indicator => {
                    if (Math.random() > 0.9) { // 10% احتمال تغيير الحالة
                        const statuses = ['online', 'away', 'offline'];
                        const currentStatus = statuses.find(s => indicator.classList.contains(s));
                        const newStatus = statuses[Math.floor(Math.random() * statuses.length)];
                        
                        if (currentStatus !== newStatus) {
                            indicator.classList.remove('online', 'away', 'offline');
                            indicator.classList.add(newStatus);
                        }
                    }
                });
            }

            // تحديث أعداد الرسائل غير المقروءة
            function updateUnreadCounts() {
                const badges = document.querySelectorAll('.nav-badge');
                badges.forEach(badge => {
                    if (Math.random() > 0.8) { // 20% احتمال تحديث
                        const currentCount = parseInt(badge.textContent);
                        const change = Math.floor(Math.random() * 3) - 1; // -1, 0, or 1
                        const newCount = Math.max(0, currentCount + change);
                        
                        if (newCount !== currentCount) {
                            badge.textContent = newCount;
                            badge.style.animation = 'pulse 0.8s ease';
                            setTimeout(() => {
                                badge.style.animation = '';
                            }, 800);
                        }
                    }
                });
            }

            // تشغيل التحديثات كل 30 ثانية
            setInterval(() => {
                updateOnlineStatus();
                updateUnreadCounts();
            }, 30000);

            // === إدارة البحث ===
            const searchInputs = document.querySelectorAll('.search-input, .chat-search input');
            
            searchInputs.forEach(input => {
                input.addEventListener('input', function() {
                    const query = this.value.toLowerCase();
                    if (query.length > 2) {
                        performSearch(query, this);
                    } else {
                        clearSearchResults(this);
                    }
                });
            });

            function performSearch(query, inputElement) {
                if (inputElement.closest('.chat-sidebar')) {
                    // البحث في المحادثات
                    const chatItems = document.querySelectorAll('.chat-item');
                    chatItems.forEach(item => {
                        const chatName = item.querySelector('.chat-name').textContent.toLowerCase();
                        const lastMessage = item.querySelector('.chat-last-message').textContent.toLowerCase();
                        
                        if (chatName.includes(query) || lastMessage.includes(query)) {
                            item.style.display = '';
                            item.style.background = 'var(--primary-lightest)';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                } else {
                    // البحث العام
                    console.log('البحث عن:', query);
                }
            }

            function clearSearchResults(inputElement) {
                if (inputElement.closest('.chat-sidebar')) {
                    const chatItems = document.querySelectorAll('.chat-item');
                    chatItems.forEach(item => {
                        item.style.display = '';
                        item.style.background = '';
                    });
                }
            }

            // === معالجة الملفات ===
            const fileButtons = document.querySelectorAll('[title="إرفاق ملف"], [title="إرسال صورة"]');
            
            fileButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const fileType = this.getAttribute('title') === 'إرسال صورة' ? 'image/*' : '*/*';
                    createFileInput(fileType);
                });
            });

            function createFileInput(acceptType) {
                const fileInput = document.createElement('input');
                fileInput.type = 'file';
                fileInput.accept = acceptType;
                fileInput.style.display = 'none';
                
                fileInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        handleFileUpload(file);
                    }
                });
                
                document.body.appendChild(fileInput);
                fileInput.click();
                document.body.removeChild(fileInput);
            }

            function handleFileUpload(file) {
                console.log('رفع الملف:', file.name, file.size, file.type);
                
                // محاكاة رفع الملف
                const currentTime = new Date().toLocaleTimeString('ar-SA', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                let messageContent;
                
                if (file.type.startsWith('image/')) {
                    messageContent = `
                        <img src="${URL.createObjectURL(file)}" class="message-image" alt="${file.name}">
                        <div class="message-time">${currentTime}</div>
                    `;
                } else {
                    messageContent = `
                        <div class="message-file">
                            <div class="file-icon">
                                <i class="fas fa-file"></i>
                            </div>
                            <div class="file-info">
                                <div class="file-name">${file.name}</div>
                                <div class="file-size">${formatFileSize(file.size)}</div>
                            </div>
                            <button class="file-download">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                        <div class="message-time">${currentTime}</div>
                    `;
                }
                
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message sent';
                messageDiv.innerHTML = `<div class="message-content">${messageContent}</div>`;
                
                messagesContainer.appendChild(messageDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                showNotification('تم رفع الملف بنجاح', 'success');
            }

            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }

            // === تهيئة البيانات الأولية ===
            
            // تحديد أول محادثة افتراضياً
            if (chatItems.length > 0) {
                chatItems[0].click();
            }

            // تحديد أول منصة اجتماع افتراضياً
            if (meetingOptions.length > 0) {
                meetingOptions[0].classList.add('selected');
            }

            // تحديث عنوان التقويم
            updateCalendarTitle();

            console.log('✅ تم تهيئة جميع مكونات النظام بنجاح');
        });

        // === وظائف عامة خارج DOM ===
        
        // تنسيق التاريخ العربي
        function formatArabicDate(date) {
            return new Intl.DateTimeFormat('ar-SA', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                weekday: 'long'
            }).format(new Date(date));
        }

        // تنسيق الوقت العربي
        function formatArabicTime(time) {
            return new Intl.DateTimeFormat('ar-SA', {
                hour: '2-digit',
                minute: '2-digit',
                hour12: true
            }).format(new Date(time));
        }

        // إنشاء معرف فريد
        function generateUniqueId() {
            return Date.now().toString(36) + Math.random().toString(36).substring(2);
        }

        // حفظ بيانات المحادثة محلياً
        function saveChatData(chatId, messages) {
            try {
                const chatData = {
                    chatId: chatId,
                    messages: messages,
                    lastUpdated: new Date().toISOString()
                };
                
                localStorage.setItem(`chat_${chatId}`, JSON.stringify(chatData));
                console.log('تم حفظ بيانات المحادثة:', chatId);
            } catch (e) {
                console.warn('فشل في حفظ بيانات المحادثة:', e);
            }
        }

        // استرداد بيانات المحادثة محلياً
        function loadChatData(chatId) {
            try {
                const savedData = localStorage.getItem(`chat_${chatId}`);
                return savedData ? JSON.parse(savedData) : null;
            } catch (e) {
                console.warn('فشل في استرداد بيانات المحادثة:', e);
                return null;
            }
        }

        // تصدير محادثة كملف
        function exportChat(chatId, chatName) {
            const chatData = loadChatData(chatId);
            if (!chatData) {
                console.warn('لا توجد بيانات للمحادثة');
                return;
            }
            
            let chatText = `محادثة مع: ${chatName}\n`;
            chatText += `تاريخ التصدير: ${formatArabicDate(new Date())}\n`;
            chatText += '=====================================\n\n';
            
            chatData.messages.forEach(message => {
                const sender = message.type === 'sent' ? 'أنت' : chatName;
                chatText += `[${message.time}] ${sender}: ${message.content}\n\n`;
            });
            
            const blob = new Blob([chatText], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `محادثة_${chatName}_${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            URL.revokeObjectURL(url);
            console.log('تم تصدير المحادثة:', chatName);
        }

        // تحليل نشاط المحادثات
        function analyzeChatActivity() {
            const activity = {
                totalChats: 0,
                totalMessages: 0,
                activeChats: 0,
                averageResponseTime: 0,
                topContacts: []
            };
            
            // محاكاة التحليل
            activity.totalChats = document.querySelectorAll('.chat-item').length;
            activity.activeChats = document.querySelectorAll('.chat-item .unread-badge').length;
            activity.totalMessages = Math.floor(Math.random() * 500) + 100;
            activity.averageResponseTime = Math.floor(Math.random() * 30) + 5; // دقائق
            
            console.log('تحليل نشاط المحادثات:', activity);
            return activity;
        }

        // إدارة الحالة المتصلة
        function setOnlineStatus(status) {
            const validStatuses = ['online', 'away', 'offline'];
            if (!validStatuses.includes(status)) {
                console.warn('حالة غير صحيحة:', status);
                return;
            }
            
            const userIndicators = document.querySelectorAll('.user-avatar .status-indicator');
            userIndicators.forEach(indicator => {
                indicator.classList.remove('online', 'away', 'offline');
                indicator.classList.add(status);
            });
            
            console.log('تم تحديث الحالة إلى:', status);
        }

        // جدولة تذكير للاجتماع
        function scheduleReminder(meetingData, reminderTime) {
            const reminderDate = new Date(meetingData.date + ' ' + meetingData.time);
            reminderDate.setMinutes(reminderDate.getMinutes() - reminderTime);
            
            const now = new Date();
            const timeUntilReminder = reminderDate.getTime() - now.getTime();
            
            if (timeUntilReminder > 0) {
                setTimeout(() => {
                    showNotification(`تذكير: اجتماع "${meetingData.title}" خلال ${reminderTime} دقيقة`, 'info');
                }, timeUntilReminder);
                
                console.log(`تم جدولة تذكير للاجتماع "${meetingData.title}" خلال ${timeUntilReminder / 1000 / 60} دقيقة`);
            }
        }

        console.log('🎉 تم تحميل جميع وظائف نظام الدردشة والمواعيد بنجاح');
    </script>
</body>
</html>